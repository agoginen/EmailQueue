(function(n,t){t(["./kendo.editor"],n)})(function(){return function(n,t){var i=window.kendo,r=i.ui,u=r.Editor,e=n.extend,o=n.proxy,f=u.extend({init:function(t,r){var e=this,r=r||{},y=r.height||105,p=r.field,s=r.tool||"insertImage",h=r.multipleInsert||!1,w=r.multipleUpload||!0,g=r.multipleDetele||!0,c=r.fileTypes||"*.png,*.jpg,*.gif",f=r.url||i.ui.options.url||"/api/Oss",l=r.fileUrl||i.ui.options.fileUrl,b=r.imageUrl||i.ui.options.imageUrl||l,k=r.thumbnailUrl||i.ui.options.thumbnailUrl||f.trimEnd("/")+"/Thumbnail",a=r.browserDialogOpen||i.ui.options.browserDialogOpen||null,o=r.editorOptions||null,d=n.extend(!0,{read:{url:f.trimEnd("/")+"/Read",type:"GET",data:{searchPattern:c}},destroy:{url:f.trimEnd("/")+"/Delete",type:"POST"},create:{url:f.trimEnd("/")+"/Create",type:"POST"},uploadUrl:f.trimEnd("/")+"/Save",fileUrl:l,imageUrl:b,thumbnailUrl:k},r.transport),v={fileTypes:c,transport:d};r=n.extend(!0,{tool:s,tools:[{name:s,exec:function(){if(!h){var t=n(this).data("kendoEditor"),i=t.createRange();i.selectNodeContents(t.body);t.selectRange(i)}}},{name:"cleanFormatting",tooltip:"删除",exec:function(t){var i,r;t.preventDefault();t.stopPropagation();i=n(this).data("kendoEditor");h||(r=i.createRange(),r.selectNodeContents(i.body),i.selectRange(r),o&&(o.model[p]="",o.model.dirty=!0));i.exec("inserthtml",{value:""})}}],imageBrowser:v,fileBrowser:v,dialogOptions:{open:function(t){var r=this.element,u=n(".k-filebrowser",r).data("kendoFileBrowser"),f=n(".k-imagebrowser",r).data("kendoImageBrowser"),e=n(".k-upload input",r).data("kendoUpload");n(".k-edit-label",r).each(function(t,i){var r=n(i),f=r.next(".k-edit-field"),e=r.children("label"),u=e.attr("for");r.attr("label-container-for",u);f.attr("data-container-for",u)});n("#k-editor-image-height",r).val(100).attr("readonly",!0);e.setOptions({multiple:w,upload:function(n){var t=f||u,o=t.options,s=o.fileTypes,h=new RegExp(("("+s.split(",").join(")|(")+")").replace(/\*\./g,".*."),"i"),e=n.files[0].name,r;if(h.test(e))if(n.data={path:t.path()},r=t._createFile(e),r){r._uploading=!0;t.upload.one("success",function(){delete r._uploading;t._tiles=t.listView.items().filter("["+i.attr("type")+"=f]");t._scroll()})}else n.preventDefault();else n.preventDefault(),t._showMessage(i.format(o.messages.invalidFileType,e,s))}});typeof a=="function"&&a.call(this,t)}}},r);r.name="Editor";u.fn.init.call(e,t,r);n(e.body).attr("contenteditable",!1);e.wrapper.find(".k-editable-area").height(y)},options:{name:"ResourceEditor"},value:function(u){var f=this;if(u===t)return f.options.tool=="insertImage"?n(f.body).find("img").map(function(){return n(this).attr("src")}).toArray().join(";"):n(f.body).find("a").map(function(){return n(this).attr("href")}).toArray().join(";");u===r.editor.emptyElementContent&&(u="");u=u&&u.split(";").map(function(n){return f.options.tool=="insertImage"?i.format('<img alt="" height="100" src="{0}">',n):i.format('<a href="{0}">{0}<\/a>',n)}).join("");i.ui.Editor.fn.value.call(f,u)},exec:function(t,r){var u=this,s,e,f=null,c=n.extend,l=n.proxy,h=i.ui.Editor,o;if(!t)throw new Error("kendoEditor.exec(): `name` parameter cannot be empty");if(t=t.toLowerCase(),u.keyboard.isTypingInProgress()||u.restoreSelection(),e=u.toolbar.toolById(t),!e)for(o in h.defaultTools)if(o.toLowerCase()==t){e=h.defaultTools[o];break}if(e){if(s=u.getRange(),e.command&&(f=e.command(c({range:s},r))),u.trigger("execute",{name:t,command:f}),/^(undo|redo)$/i.test(t))u.undoRedoStack[t]();else if(f&&(f.managesUndoRedo||u.undoRedoStack.push(f),f.editor=u,f.exec(),f.async)){f.change=l(u._selectionChange,u);return}u._selectionChange()}}});r.plugin(f)}(window.kendo.jQuery),window.kendo},typeof define=="function"&&define.amd?define:function(n,t){t()}),function(n,t){var r=window.kendo,f=n.extend,i=r.ui.editor,l=i.EditorUtils,a=i.Dom,v=l.registerTool,y=i.ToolTemplate,e=i.RangeUtils,p=i.Command,o=r.keys,u="#k-editor-image-url",s="#k-editor-image-title",h="#k-editor-image-width",c="#k-editor-image-height";f(!0,i.ImageCommand.fn,{exec:function(){function k(t){var r=l.element,f=parseInt(r.find(h).val(),10),e=parseInt(r.find(c).val(),10),o=n._imageBrowser.path();n.attributes={src:r.find(u).val().replace(/ /g,"%20"),alt:r.find(s).val()};n.attributes.width=null;n.attributes.height=null;!isNaN(f)&&f>0&&(n.attributes.width=f);!isNaN(e)&&e>0&&(n.attributes.height=e);d=n.insertImage(i,y);w(t);n.change&&n.change();sessionStorage.setItem("kendo.ui.ImageBrowser.path",o)}function w(t){t.preventDefault();l.destroy();a.windowFromDocument(e.documentFromRange(y)).focus();d||n.releaseRange(y)}function rt(n){n.keyCode==o.ENTER?k(n):n.keyCode==o.ESC&&w(n)}var n=this,y=n.lockRange(),d=!1,i=e.image(y),nt=i&&i.getAttribute("width")||"",tt=i&&i.getAttribute("height")||"",l,g=n.editor.options,it=g.messages,p=g.imageBrowser,v=!!(r.ui.ImageBrowser&&p&&p.transport&&p.transport.read!==t),b={title:it.insertImage,visible:!1,resizable:v};b.close=w;v&&(b.width=750);l=this.createDialog(n._dialogTemplate(v),b).toggleClass("k-filebrowser-dialog",v).find(".k-dialog-insert").click(k).end().find(".k-dialog-close").click(w).end().find(".k-edit-field input").keydown(rt).end().find(u).val(i?i.getAttribute("src",2):"http://").end().find(s).val(i?i.alt:"").end().find(h).val(nt).end().find(c).val(tt).end().data("kendoWindow");v&&(this._imageBrowser=new r.ui.ImageBrowser(l.element.find(".k-imagebrowser"),f({},p,{path:sessionStorage.getItem("kendo.ui.ImageBrowser.path")||"/",change:function(){l.element.find(u).val(this.value())},apply:k})));l.center().open();l.element.find(u).focus().select()}})}(window.kendo.jQuery),function(n,t){var r=window.kendo,f=n.extend,i=r.ui.editor,h=i.EditorUtils,c=i.Dom,a=h.registerTool,v=i.ToolTemplate,e=i.RangeUtils,y=i.Command,p=i.LinkFormatter,l=e.textNodes,o=r.keys,u="#k-editor-file-url",s="#k-editor-file-title";f(!0,i.FileCommand.fn,{exec:function(){function b(t){var r=i.element,f=r.find(u).val().replace(/ /g,"%20"),e=r.find(s).val(),o=n._fileBrowser.path();n.attributes={href:f,innerHTML:e!==""?e:f};d=n.insertFile(h,v);p(t);n.change&&n.change();sessionStorage.setItem("kendo.ui.FileBrowser.path",o)}function p(t){t.preventDefault();i.destroy();c.windowFromDocument(e.documentFromRange(v)).focus();d||n.releaseRange(v)}function tt(n){n.keyCode==o.ENTER?b(n):n.keyCode==o.ESC&&p(n)}var n=this,v=n.lockRange(),k=l(v),d=!1,h=k.length?this.formatter.finder.findSuitable(k[0]):null,i,g=n.editor.options,nt=g.messages,y=g.fileBrowser,a=!!(r.ui.FileBrowser&&y&&y.transport&&y.transport.read!==t),w={title:nt.insertFile,visible:!1,resizable:a};w.close=p;a&&(w.width=750);i=this.createDialog(n._dialogTemplate(a),w).toggleClass("k-filebrowser-dialog",a).find(".k-dialog-insert").click(b).end().find(".k-dialog-close").click(p).end().find(".k-edit-field input").keydown(tt).end().find(u).val(h?h.getAttribute("href",2):"http://").end().find(s).val(h?h.title:"").end().data("kendoWindow");a&&(n._fileBrowser=new r.ui.FileBrowser(i.element.find(".k-filebrowser"),f({},y,{path:sessionStorage.getItem("kendo.ui.FileBrowser.path")||"/",change:function(){i.element.find(u).val(this.value())},apply:b})));i.center().open();i.element.find(u).focus().select()}})}(window.kendo.jQuery);